{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"D:/Meta Melon Data/Schengen-Expert/node_modules/next/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _toConsumableArray = require(\"D:/Meta Melon Data/Schengen-Expert/node_modules/next/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports[\"default\"] = Image;\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _head = _interopRequireDefault(require(\"../next-server/lib/head\"));\n\nvar _toBase = require(\"../next-server/lib/to-base-64\");\n\nvar _imageConfig = require(\"../next-server/server/image-config\");\n\nvar _useIntersection = require(\"./use-intersection\");\n\nif (false) {\n  ;\n  global.__NEXT_IMAGE_IMPORTED = true;\n}\n\nvar VALID_LOADING_VALUES = ['lazy', 'eager', undefined];\nvar loaders = new Map([['imgix', imgixLoader], ['cloudinary', cloudinaryLoader], ['akamai', akamaiLoader], ['default', defaultLoader]]);\nvar VALID_LAYOUT_VALUES = ['fill', 'fixed', 'intrinsic', 'responsive', undefined];\n\nfunction isStaticRequire(src) {\n  return src[\"default\"] !== undefined;\n}\n\nfunction isStaticImageData(src) {\n  return src.src !== undefined;\n}\n\nfunction isStaticImport(src) {\n  return typeof src === 'object' && (isStaticRequire(src) || isStaticImageData(src));\n}\n\nvar _ref2 = process.env.__NEXT_IMAGE_OPTS || _imageConfig.imageConfigDefault,\n    configDeviceSizes = _ref2.deviceSizes,\n    configImageSizes = _ref2.imageSizes,\n    configLoader = _ref2.loader,\n    configPath = _ref2.path,\n    configDomains = _ref2.domains; // sort smallest to largest\n\n\nvar allSizes = [].concat(_toConsumableArray(configDeviceSizes), _toConsumableArray(configImageSizes));\nconfigDeviceSizes.sort(function (a, b) {\n  return a - b;\n});\nallSizes.sort(function (a, b) {\n  return a - b;\n});\n\nfunction getWidths(width, layout, sizes) {\n  if (sizes && (layout === 'fill' || layout === 'responsive')) {\n    // Find all the \"vw\" percent sizes used in the sizes prop\n    var viewportWidthRe = /(^|\\s)(1?\\d?\\d)vw/g;\n    var percentSizes = [];\n\n    for (var match; match = viewportWidthRe.exec(sizes); match) {\n      percentSizes.push(parseInt(match[2]));\n    }\n\n    if (percentSizes.length) {\n      var smallestRatio = Math.min.apply(Math, percentSizes) * 0.01;\n      return {\n        widths: allSizes.filter(function (s) {\n          return s >= configDeviceSizes[0] * smallestRatio;\n        }),\n        kind: 'w'\n      };\n    }\n\n    return {\n      widths: allSizes,\n      kind: 'w'\n    };\n  }\n\n  if (typeof width !== 'number' || layout === 'fill' || layout === 'responsive') {\n    return {\n      widths: configDeviceSizes,\n      kind: 'w'\n    };\n  }\n\n  var widths = _toConsumableArray(new Set( // > This means that most OLED screens that say they are 3x resolution,\n  // > are actually 3x in the green color, but only 1.5x in the red and\n  // > blue colors. Showing a 3x resolution image in the app vs a 2x\n  // > resolution image will be visually the same, though the 3x image\n  // > takes significantly more data. Even true 3x resolution screens are\n  // > wasteful as the human eye cannot see that level of detail without\n  // > something like a magnifying glass.\n  // https://blog.twitter.com/engineering/en_us/topics/infrastructure/2019/capping-image-fidelity-on-ultra-high-resolution-devices.html\n  [width, width * 2\n  /*, width * 3*/\n  ].map(function (w) {\n    return allSizes.find(function (p) {\n      return p >= w;\n    }) || allSizes[allSizes.length - 1];\n  })));\n\n  return {\n    widths: widths,\n    kind: 'x'\n  };\n}\n\nfunction generateImgAttrs(_ref3) {\n  var src = _ref3.src,\n      unoptimized = _ref3.unoptimized,\n      layout = _ref3.layout,\n      width = _ref3.width,\n      quality = _ref3.quality,\n      sizes = _ref3.sizes,\n      loader = _ref3.loader;\n\n  if (unoptimized) {\n    return {\n      src: src,\n      srcSet: undefined,\n      sizes: undefined\n    };\n  }\n\n  var _getWidths = getWidths(width, layout, sizes),\n      widths = _getWidths.widths,\n      kind = _getWidths.kind;\n\n  var last = widths.length - 1;\n  return {\n    sizes: !sizes && kind === 'w' ? '100vw' : sizes,\n    srcSet: widths.map(function (w, i) {\n      return \"\".concat(loader({\n        src: src,\n        quality: quality,\n        width: w\n      }), \" \").concat(kind === 'w' ? w : i + 1).concat(kind);\n    }).join(', '),\n    // It's intended to keep `src` the last attribute because React updates\n    // attributes in order. If we keep `src` the first one, Safari will\n    // immediately start to fetch `src`, before `sizes` and `srcSet` are even\n    // updated by React. That causes multiple unnecessary requests if `srcSet`\n    // and `sizes` are defined.\n    // This bug cannot be reproduced in Chrome or Firefox.\n    src: loader({\n      src: src,\n      quality: quality,\n      width: widths[last]\n    })\n  };\n}\n\nfunction getInt(x) {\n  if (typeof x === 'number') {\n    return x;\n  }\n\n  if (typeof x === 'string') {\n    return parseInt(x, 10);\n  }\n\n  return undefined;\n}\n\nfunction defaultImageLoader(loaderProps) {\n  var load = loaders.get(configLoader);\n\n  if (load) {\n    return load((0, _extends2[\"default\"])({\n      root: configPath\n    }, loaderProps));\n  }\n\n  throw new Error(\"Unknown \\\"loader\\\" found in \\\"next.config.js\\\". Expected: \".concat(_imageConfig.VALID_LOADERS.join(', '), \". Received: \").concat(configLoader));\n} // See https://stackoverflow.com/q/39777833/266535 for why we use this ref\n// handler instead of the img's onLoad attribute.\n\n\nfunction removePlaceholder(img, placeholder) {\n  if (placeholder === 'blur' && img) {\n    var handleLoad = function handleLoad() {\n      if (!img.src.startsWith('data:')) {\n        var p = 'decode' in img ? img.decode() : Promise.resolve();\n        p[\"catch\"](function () {}).then(function () {\n          img.style.filter = 'none';\n          img.style.backgroundSize = 'none';\n          img.style.backgroundImage = 'none';\n        });\n      }\n    };\n\n    if (img.complete) {\n      // If the real image fails to load, this will still remove the placeholder.\n      // This is the desired behavior for now, and will be revisited when error\n      // handling is worked on for the image component itself.\n      handleLoad();\n    } else {\n      img.onload = handleLoad;\n    }\n  }\n}\n\nfunction Image(_ref) {\n  var src = _ref.src,\n      sizes = _ref.sizes,\n      _ref$unoptimized = _ref.unoptimized,\n      unoptimized = _ref$unoptimized === void 0 ? false : _ref$unoptimized,\n      _ref$priority = _ref.priority,\n      priority = _ref$priority === void 0 ? false : _ref$priority,\n      loading = _ref.loading,\n      className = _ref.className,\n      quality = _ref.quality,\n      width = _ref.width,\n      height = _ref.height,\n      objectFit = _ref.objectFit,\n      objectPosition = _ref.objectPosition,\n      _ref$loader = _ref.loader,\n      loader = _ref$loader === void 0 ? defaultImageLoader : _ref$loader,\n      _ref$placeholder = _ref.placeholder,\n      placeholder = _ref$placeholder === void 0 ? 'empty' : _ref$placeholder,\n      blurDataURL = _ref.blurDataURL,\n      all = (0, _objectWithoutPropertiesLoose2[\"default\"])(_ref, [\"src\", \"sizes\", \"unoptimized\", \"priority\", \"loading\", \"className\", \"quality\", \"width\", \"height\", \"objectFit\", \"objectPosition\", \"loader\", \"placeholder\", \"blurDataURL\"]);\n  var rest = all;\n  var layout = sizes ? 'responsive' : 'intrinsic';\n\n  if ('layout' in rest) {\n    // Override default layout if the user specified one:\n    if (rest.layout) layout = rest.layout; // Remove property so it's not spread into image:\n\n    delete rest['layout'];\n  }\n\n  var staticSrc = '';\n\n  if (isStaticImport(src)) {\n    var staticImageData = isStaticRequire(src) ? src[\"default\"] : src;\n\n    if (!staticImageData.src) {\n      throw new Error(\"An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received \".concat(JSON.stringify(staticImageData)));\n    }\n\n    blurDataURL = blurDataURL || staticImageData.blurDataURL;\n    staticSrc = staticImageData.src;\n\n    if (!layout || layout !== 'fill') {\n      height = height || staticImageData.height;\n      width = width || staticImageData.width;\n\n      if (!staticImageData.height || !staticImageData.width) {\n        throw new Error(\"An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received \".concat(JSON.stringify(staticImageData)));\n      }\n    }\n  }\n\n  src = typeof src === 'string' ? src : staticSrc;\n  var widthInt = getInt(width);\n  var heightInt = getInt(height);\n  var qualityInt = getInt(quality);\n\n  if (true) {\n    if (!src) {\n      throw new Error(\"Image is missing required \\\"src\\\" property. Make sure you pass \\\"src\\\" in props to the `next/image` component. Received: \".concat(JSON.stringify({\n        width: width,\n        height: height,\n        quality: quality\n      })));\n    }\n\n    if (!VALID_LAYOUT_VALUES.includes(layout)) {\n      throw new Error(\"Image with src \\\"\".concat(src, \"\\\" has invalid \\\"layout\\\" property. Provided \\\"\").concat(layout, \"\\\" should be one of \").concat(VALID_LAYOUT_VALUES.map(String).join(','), \".\"));\n    }\n\n    if (typeof widthInt !== 'undefined' && isNaN(widthInt) || typeof heightInt !== 'undefined' && isNaN(heightInt)) {\n      throw new Error(\"Image with src \\\"\".concat(src, \"\\\" has invalid \\\"width\\\" or \\\"height\\\" property. These should be numeric values.\"));\n    }\n\n    if (!VALID_LOADING_VALUES.includes(loading)) {\n      throw new Error(\"Image with src \\\"\".concat(src, \"\\\" has invalid \\\"loading\\\" property. Provided \\\"\").concat(loading, \"\\\" should be one of \").concat(VALID_LOADING_VALUES.map(String).join(','), \".\"));\n    }\n\n    if (priority && loading === 'lazy') {\n      throw new Error(\"Image with src \\\"\".concat(src, \"\\\" has both \\\"priority\\\" and \\\"loading='lazy'\\\" properties. Only one should be used.\"));\n    }\n\n    if (placeholder === 'blur') {\n      if (layout !== 'fill' && (widthInt || 0) * (heightInt || 0) < 1600) {\n        console.warn(\"Image with src \\\"\".concat(src, \"\\\" is smaller than 40x40. Consider removing the \\\"placeholder='blur'\\\" property to improve performance.\"));\n      }\n\n      if (!blurDataURL) {\n        var VALID_BLUR_EXT = ['jpeg', 'png', 'webp']; // should match next-image-loader\n\n        throw new Error(\"Image with src \\\"\".concat(src, \"\\\" has \\\"placeholder='blur'\\\" property but is missing the \\\"blurDataURL\\\" property.\\n          Possible solutions:\\n            - Add a \\\"blurDataURL\\\" property, the contents should be a small Data URL to represent the image\\n            - Change the \\\"src\\\" property to a static import with one of the supported file types: \").concat(VALID_BLUR_EXT.join(','), \"\\n            - Remove the \\\"placeholder\\\" property, effectively no blur effect\\n          Read more: https://nextjs.org/docs/messages/placeholder-blur-data-url\"));\n      }\n    }\n  }\n\n  var isLazy = !priority && (loading === 'lazy' || typeof loading === 'undefined');\n\n  if (src && src.startsWith('data:')) {\n    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs\n    unoptimized = true;\n    isLazy = false;\n  }\n\n  var _ref4 = (0, _useIntersection.useIntersection)({\n    rootMargin: '200px',\n    disabled: !isLazy\n  }),\n      _ref5 = _slicedToArray(_ref4, 2),\n      setRef = _ref5[0],\n      isIntersected = _ref5[1];\n\n  var isVisible = !isLazy || isIntersected;\n  var wrapperStyle;\n  var sizerStyle;\n  var sizerSvg;\n  var imgStyle = (0, _extends2[\"default\"])({\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    boxSizing: 'border-box',\n    padding: 0,\n    border: 'none',\n    margin: 'auto',\n    display: 'block',\n    width: 0,\n    height: 0,\n    minWidth: '100%',\n    maxWidth: '100%',\n    minHeight: '100%',\n    maxHeight: '100%',\n    objectFit: objectFit,\n    objectPosition: objectPosition\n  }, placeholder === 'blur' ? {\n    filter: 'blur(20px)',\n    backgroundSize: 'cover',\n    backgroundImage: \"url(\\\"\".concat(blurDataURL, \"\\\")\")\n  } : undefined);\n\n  if (typeof widthInt !== 'undefined' && typeof heightInt !== 'undefined' && layout !== 'fill') {\n    // <Image src=\"i.png\" width=\"100\" height=\"100\" />\n    var quotient = heightInt / widthInt;\n    var paddingTop = isNaN(quotient) ? '100%' : \"\".concat(quotient * 100, \"%\");\n\n    if (layout === 'responsive') {\n      // <Image src=\"i.png\" width=\"100\" height=\"100\" layout=\"responsive\" />\n      wrapperStyle = {\n        display: 'block',\n        overflow: 'hidden',\n        position: 'relative',\n        boxSizing: 'border-box',\n        margin: 0\n      };\n      sizerStyle = {\n        display: 'block',\n        boxSizing: 'border-box',\n        paddingTop: paddingTop\n      };\n    } else if (layout === 'intrinsic') {\n      // <Image src=\"i.png\" width=\"100\" height=\"100\" layout=\"intrinsic\" />\n      wrapperStyle = {\n        display: 'inline-block',\n        maxWidth: '100%',\n        overflow: 'hidden',\n        position: 'relative',\n        boxSizing: 'border-box',\n        margin: 0\n      };\n      sizerStyle = {\n        boxSizing: 'border-box',\n        display: 'block',\n        maxWidth: '100%'\n      };\n      sizerSvg = \"<svg width=\\\"\".concat(widthInt, \"\\\" height=\\\"\").concat(heightInt, \"\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" version=\\\"1.1\\\"/>\");\n    } else if (layout === 'fixed') {\n      // <Image src=\"i.png\" width=\"100\" height=\"100\" layout=\"fixed\" />\n      wrapperStyle = {\n        overflow: 'hidden',\n        boxSizing: 'border-box',\n        display: 'inline-block',\n        position: 'relative',\n        width: widthInt,\n        height: heightInt\n      };\n    }\n  } else if (typeof widthInt === 'undefined' && typeof heightInt === 'undefined' && layout === 'fill') {\n    // <Image src=\"i.png\" layout=\"fill\" />\n    wrapperStyle = {\n      display: 'block',\n      overflow: 'hidden',\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      bottom: 0,\n      right: 0,\n      boxSizing: 'border-box',\n      margin: 0\n    };\n  } else {\n    // <Image src=\"i.png\" />\n    if (true) {\n      throw new Error(\"Image with src \\\"\".concat(src, \"\\\" must use \\\"width\\\" and \\\"height\\\" properties or \\\"layout='fill'\\\" property.\"));\n    }\n  }\n\n  var imgAttributes = {\n    src: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n    srcSet: undefined,\n    sizes: undefined\n  };\n\n  if (isVisible) {\n    imgAttributes = generateImgAttrs({\n      src: src,\n      unoptimized: unoptimized,\n      layout: layout,\n      width: widthInt,\n      quality: qualityInt,\n      sizes: sizes,\n      loader: loader\n    });\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: wrapperStyle\n  }, sizerStyle ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: sizerStyle\n  }, sizerSvg ? /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n    style: {\n      maxWidth: '100%',\n      display: 'block',\n      margin: 0,\n      border: 'none',\n      padding: 0\n    },\n    alt: \"\",\n    \"aria-hidden\": true,\n    role: \"presentation\",\n    src: \"data:image/svg+xml;base64,\".concat((0, _toBase.toBase64)(sizerSvg))\n  }) : null) : null, !isVisible && /*#__PURE__*/_react[\"default\"].createElement(\"noscript\", null, /*#__PURE__*/_react[\"default\"].createElement(\"img\", Object.assign({}, rest, generateImgAttrs({\n    src: src,\n    unoptimized: unoptimized,\n    layout: layout,\n    width: widthInt,\n    quality: qualityInt,\n    sizes: sizes,\n    loader: loader\n  }), {\n    decoding: \"async\",\n    style: imgStyle,\n    className: className\n  }))), /*#__PURE__*/_react[\"default\"].createElement(\"img\", Object.assign({}, rest, imgAttributes, {\n    decoding: \"async\",\n    className: className,\n    ref: function ref(element) {\n      setRef(element);\n      removePlaceholder(element, placeholder);\n    },\n    style: imgStyle\n  })), priority ?\n  /*#__PURE__*/\n  // Note how we omit the `href` attribute, as it would only be relevant\n  // for browsers that do not support `imagesrcset`, and in those cases\n  // it would likely cause the incorrect image to be preloaded.\n  //\n  // https://html.spec.whatwg.org/multipage/semantics.html#attr-link-imagesrcset\n  _react[\"default\"].createElement(_head[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(\"link\", {\n    key: '__nimg-' + imgAttributes.src + imgAttributes.srcSet + imgAttributes.sizes,\n    rel: \"preload\",\n    as: \"image\",\n    href: imgAttributes.srcSet ? undefined : imgAttributes.src // @ts-ignore: imagesrcset is not yet in the link element type\n    ,\n    imagesrcset: imgAttributes.srcSet // @ts-ignore: imagesizes is not yet in the link element type\n    ,\n    imagesizes: imgAttributes.sizes\n  })) : null);\n} //BUILT IN LOADERS\n\n\n_c = Image;\n\nfunction normalizeSrc(src) {\n  return src[0] === '/' ? src.slice(1) : src;\n}\n\nfunction imgixLoader(_ref6) {\n  var root = _ref6.root,\n      src = _ref6.src,\n      width = _ref6.width,\n      quality = _ref6.quality;\n  // Demo: https://static.imgix.net/daisy.png?format=auto&fit=max&w=300\n  var params = ['auto=format', 'fit=max', 'w=' + width];\n  var paramsString = '';\n\n  if (quality) {\n    params.push('q=' + quality);\n  }\n\n  if (params.length) {\n    paramsString = '?' + params.join('&');\n  }\n\n  return \"\".concat(root).concat(normalizeSrc(src)).concat(paramsString);\n}\n\nfunction akamaiLoader(_ref7) {\n  var root = _ref7.root,\n      src = _ref7.src,\n      width = _ref7.width;\n  return \"\".concat(root).concat(normalizeSrc(src), \"?imwidth=\").concat(width);\n}\n\nfunction cloudinaryLoader(_ref8) {\n  var root = _ref8.root,\n      src = _ref8.src,\n      width = _ref8.width,\n      quality = _ref8.quality;\n  // Demo: https://res.cloudinary.com/demo/image/upload/w_300,c_limit,q_auto/turtles.jpg\n  var params = ['f_auto', 'c_limit', 'w_' + width, 'q_' + (quality || 'auto')];\n  var paramsString = params.join(',') + '/';\n  return \"\".concat(root).concat(paramsString).concat(normalizeSrc(src));\n}\n\nfunction defaultLoader(_ref9) {\n  var root = _ref9.root,\n      src = _ref9.src,\n      width = _ref9.width,\n      quality = _ref9.quality;\n\n  if (true) {\n    var missingValues = []; // these should always be provided but make sure they are\n\n    if (!src) missingValues.push('src');\n    if (!width) missingValues.push('width');\n\n    if (missingValues.length > 0) {\n      throw new Error(\"Next Image Optimization requires \".concat(missingValues.join(', '), \" to be provided. Make sure you pass them as props to the `next/image` component. Received: \").concat(JSON.stringify({\n        src: src,\n        width: width,\n        quality: quality\n      })));\n    }\n\n    if (src.startsWith('//')) {\n      throw new Error(\"Failed to parse src \\\"\".concat(src, \"\\\" on `next/image`, protocol-relative URL (//) must be changed to an absolute URL (http:// or https://)\"));\n    }\n\n    if (!src.startsWith('/') && configDomains) {\n      var parsedSrc;\n\n      try {\n        parsedSrc = new URL(src);\n      } catch (err) {\n        console.error(err);\n        throw new Error(\"Failed to parse src \\\"\".concat(src, \"\\\" on `next/image`, if using relative image it must start with a leading slash \\\"/\\\" or be an absolute URL (http:// or https://)\"));\n      }\n\n      if (!configDomains.includes(parsedSrc.hostname)) {\n        throw new Error(\"Invalid src prop (\".concat(src, \") on `next/image`, hostname \\\"\").concat(parsedSrc.hostname, \"\\\" is not configured under images in your `next.config.js`\\n\") + \"See more info: https://nextjs.org/docs/messages/next-image-unconfigured-host\");\n      }\n    }\n  }\n\n  return \"\".concat(root, \"?url=\").concat(encodeURIComponent(src), \"&w=\").concat(width, \"&q=\").concat(quality || 75);\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"Image\");","map":{"version":3,"sources":["../../client/image.tsx"],"names":["global","VALID_LOADING_VALUES","loaders","VALID_LAYOUT_VALUES","src","isStaticRequire","isStaticImageData","deviceSizes","imageSizes","loader","path","domains","process","imageConfigDefault","allSizes","configDeviceSizes","a","sizes","layout","viewportWidthRe","percentSizes","match","parseInt","smallestRatio","Math","widths","s","kind","width","w","p","srcSet","getWidths","last","quality","i","load","root","VALID_LOADERS","placeholder","handleLoad","img","Promise","unoptimized","priority","all","rest","staticSrc","isStaticImport","staticImageData","JSON","blurDataURL","height","widthInt","getInt","heightInt","qualityInt","isNaN","loading","console","VALID_BLUR_EXT","isLazy","rootMargin","disabled","isVisible","imgStyle","position","top","left","bottom","right","boxSizing","padding","border","margin","display","minWidth","maxWidth","minHeight","maxHeight","objectFit","objectPosition","filter","backgroundSize","backgroundImage","quotient","paddingTop","wrapperStyle","overflow","sizerStyle","sizerSvg","imgAttributes","generateImgAttrs","element","setRef","removePlaceholder","params","paramsString","normalizeSrc","missingValues","parsedSrc","configDomains","encodeURIComponent"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Head from '../next-server/lib/head'\nimport { toBase64 } from '../next-server/lib/to-base-64'\nimport {\n  ImageConfig,\n  imageConfigDefault,\n  LoaderValue,\n  VALID_LOADERS,\n} from '../next-server/server/image-config'\nimport { useIntersection } from './use-intersection'\n\nif (typeof window === 'undefined') {\n  ;(global as any).__NEXT_IMAGE_IMPORTED = true\n}\n\nconst VALID_LOADING_VALUES = ['lazy', 'eager', undefined] as const\ntype LoadingValue = typeof VALID_LOADING_VALUES[number]\n\nexport type ImageLoader = (resolverProps: ImageLoaderProps) => string\n\nexport type ImageLoaderProps = {\n  src: string\n  width: number\n  quality?: number\n}\n\ntype DefaultImageLoaderProps = ImageLoaderProps & { root: string }\n\nconst loaders = new Map<\n  LoaderValue,\n  (props: DefaultImageLoaderProps) => string\n>([\n  ['imgix', imgixLoader],\n  ['cloudinary', cloudinaryLoader],\n  ['akamai', akamaiLoader],\n  ['default', defaultLoader],\n])\n\nconst VALID_LAYOUT_VALUES = [\n  'fill',\n  'fixed',\n  'intrinsic',\n  'responsive',\n  undefined,\n] as const\ntype LayoutValue = typeof VALID_LAYOUT_VALUES[number]\n\ntype PlaceholderValue = 'blur' | 'empty'\n\ntype ImgElementStyle = NonNullable<JSX.IntrinsicElements['img']['style']>\n\ninterface StaticImageData {\n  src: string\n  height: number\n  width: number\n  blurDataURL?: string\n}\n\ninterface StaticRequire {\n  default: StaticImageData\n}\n\ntype StaticImport = StaticRequire | StaticImageData\n\nfunction isStaticRequire(\n  src: StaticRequire | StaticImageData\n): src is StaticRequire {\n  return (src as StaticRequire).default !== undefined\n}\n\nfunction isStaticImageData(\n  src: StaticRequire | StaticImageData\n): src is StaticImageData {\n  return (src as StaticImageData).src !== undefined\n}\n\nfunction isStaticImport(src: string | StaticImport): src is StaticImport {\n  return (\n    typeof src === 'object' &&\n    (isStaticRequire(src as StaticImport) ||\n      isStaticImageData(src as StaticImport))\n  )\n}\n\ntype StringImageProps = {\n  src: string\n} & (\n  | { width?: never; height?: never; layout: 'fill' }\n  | {\n      width: number | string\n      height: number | string\n      layout?: Exclude<LayoutValue, 'fill'>\n    }\n) &\n  (\n    | {\n        placeholder?: Exclude<PlaceholderValue, 'blur'>\n        blurDataURL?: never\n      }\n    | { placeholder: 'blur'; blurDataURL: string }\n  )\n\ntype ObjectImageProps = {\n  src: StaticImport\n  width?: number | string\n  height?: number | string\n  layout?: LayoutValue\n  placeholder?: PlaceholderValue\n  blurDataURL?: never\n}\n\nexport type ImageProps = Omit<\n  JSX.IntrinsicElements['img'],\n  'src' | 'srcSet' | 'ref' | 'width' | 'height' | 'loading' | 'style'\n> & {\n  loader?: ImageLoader\n  quality?: number | string\n  priority?: boolean\n  loading?: LoadingValue\n  unoptimized?: boolean\n  objectFit?: ImgElementStyle['objectFit']\n  objectPosition?: ImgElementStyle['objectPosition']\n} & (StringImageProps | ObjectImageProps)\n\nconst {\n  deviceSizes: configDeviceSizes,\n  imageSizes: configImageSizes,\n  loader: configLoader,\n  path: configPath,\n  domains: configDomains,\n} =\n  ((process.env.__NEXT_IMAGE_OPTS as any) as ImageConfig) || imageConfigDefault\n// sort smallest to largest\nconst allSizes = [...configDeviceSizes, ...configImageSizes]\nconfigDeviceSizes.sort((a, b) => a - b)\nallSizes.sort((a, b) => a - b)\n\nfunction getWidths(\n  width: number | undefined,\n  layout: LayoutValue,\n  sizes: string | undefined\n): { widths: number[]; kind: 'w' | 'x' } {\n  if (sizes && (layout === 'fill' || layout === 'responsive')) {\n    // Find all the \"vw\" percent sizes used in the sizes prop\n    const viewportWidthRe = /(^|\\s)(1?\\d?\\d)vw/g\n    const percentSizes = []\n    for (let match; (match = viewportWidthRe.exec(sizes)); match) {\n      percentSizes.push(parseInt(match[2]))\n    }\n    if (percentSizes.length) {\n      const smallestRatio = Math.min(...percentSizes) * 0.01\n      return {\n        widths: allSizes.filter(\n          (s) => s >= configDeviceSizes[0] * smallestRatio\n        ),\n        kind: 'w',\n      }\n    }\n    return { widths: allSizes, kind: 'w' }\n  }\n  if (\n    typeof width !== 'number' ||\n    layout === 'fill' ||\n    layout === 'responsive'\n  ) {\n    return { widths: configDeviceSizes, kind: 'w' }\n  }\n\n  const widths = [\n    ...new Set(\n      // > This means that most OLED screens that say they are 3x resolution,\n      // > are actually 3x in the green color, but only 1.5x in the red and\n      // > blue colors. Showing a 3x resolution image in the app vs a 2x\n      // > resolution image will be visually the same, though the 3x image\n      // > takes significantly more data. Even true 3x resolution screens are\n      // > wasteful as the human eye cannot see that level of detail without\n      // > something like a magnifying glass.\n      // https://blog.twitter.com/engineering/en_us/topics/infrastructure/2019/capping-image-fidelity-on-ultra-high-resolution-devices.html\n      [width, width * 2 /*, width * 3*/].map(\n        (w) => allSizes.find((p) => p >= w) || allSizes[allSizes.length - 1]\n      )\n    ),\n  ]\n  return { widths, kind: 'x' }\n}\n\ntype GenImgAttrsData = {\n  src: string\n  unoptimized: boolean\n  layout: LayoutValue\n  loader: ImageLoader\n  width?: number\n  quality?: number\n  sizes?: string\n}\n\ntype GenImgAttrsResult = {\n  src: string\n  srcSet: string | undefined\n  sizes: string | undefined\n}\n\nfunction generateImgAttrs({\n  src,\n  unoptimized,\n  layout,\n  width,\n  quality,\n  sizes,\n  loader,\n}: GenImgAttrsData): GenImgAttrsResult {\n  if (unoptimized) {\n    return { src, srcSet: undefined, sizes: undefined }\n  }\n\n  const { widths, kind } = getWidths(width, layout, sizes)\n  const last = widths.length - 1\n\n  return {\n    sizes: !sizes && kind === 'w' ? '100vw' : sizes,\n    srcSet: widths\n      .map(\n        (w, i) =>\n          `${loader({ src, quality, width: w })} ${\n            kind === 'w' ? w : i + 1\n          }${kind}`\n      )\n      .join(', '),\n\n    // It's intended to keep `src` the last attribute because React updates\n    // attributes in order. If we keep `src` the first one, Safari will\n    // immediately start to fetch `src`, before `sizes` and `srcSet` are even\n    // updated by React. That causes multiple unnecessary requests if `srcSet`\n    // and `sizes` are defined.\n    // This bug cannot be reproduced in Chrome or Firefox.\n    src: loader({ src, quality, width: widths[last] }),\n  }\n}\n\nfunction getInt(x: unknown): number | undefined {\n  if (typeof x === 'number') {\n    return x\n  }\n  if (typeof x === 'string') {\n    return parseInt(x, 10)\n  }\n  return undefined\n}\n\nfunction defaultImageLoader(loaderProps: ImageLoaderProps) {\n  const load = loaders.get(configLoader)\n  if (load) {\n    return load({ root: configPath, ...loaderProps })\n  }\n  throw new Error(\n    `Unknown \"loader\" found in \"next.config.js\". Expected: ${VALID_LOADERS.join(\n      ', '\n    )}. Received: ${configLoader}`\n  )\n}\n\n// See https://stackoverflow.com/q/39777833/266535 for why we use this ref\n// handler instead of the img's onLoad attribute.\nfunction removePlaceholder(\n  img: HTMLImageElement | null,\n  placeholder: PlaceholderValue\n) {\n  if (placeholder === 'blur' && img) {\n    const handleLoad = () => {\n      if (!img.src.startsWith('data:')) {\n        const p = 'decode' in img ? img.decode() : Promise.resolve()\n        p.catch(() => {}).then(() => {\n          img.style.filter = 'none'\n          img.style.backgroundSize = 'none'\n          img.style.backgroundImage = 'none'\n        })\n      }\n    }\n    if (img.complete) {\n      // If the real image fails to load, this will still remove the placeholder.\n      // This is the desired behavior for now, and will be revisited when error\n      // handling is worked on for the image component itself.\n      handleLoad()\n    } else {\n      img.onload = handleLoad\n    }\n  }\n}\n\nexport default function Image({\n  src,\n  sizes,\n  unoptimized = false,\n  priority = false,\n  loading,\n  className,\n  quality,\n  width,\n  height,\n  objectFit,\n  objectPosition,\n  loader = defaultImageLoader,\n  placeholder = 'empty',\n  blurDataURL,\n  ...all\n}: ImageProps) {\n  let rest: Partial<ImageProps> = all\n  let layout: NonNullable<LayoutValue> = sizes ? 'responsive' : 'intrinsic'\n  if ('layout' in rest) {\n    // Override default layout if the user specified one:\n    if (rest.layout) layout = rest.layout\n\n    // Remove property so it's not spread into image:\n    delete rest['layout']\n  }\n\n  let staticSrc = ''\n  if (isStaticImport(src)) {\n    const staticImageData = isStaticRequire(src) ? src.default : src\n\n    if (!staticImageData.src) {\n      throw new Error(\n        `An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(\n          staticImageData\n        )}`\n      )\n    }\n    blurDataURL = blurDataURL || staticImageData.blurDataURL\n    staticSrc = staticImageData.src\n    if (!layout || layout !== 'fill') {\n      height = height || staticImageData.height\n      width = width || staticImageData.width\n      if (!staticImageData.height || !staticImageData.width) {\n        throw new Error(\n          `An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(\n            staticImageData\n          )}`\n        )\n      }\n    }\n  }\n  src = typeof src === 'string' ? src : staticSrc\n\n  const widthInt = getInt(width)\n  const heightInt = getInt(height)\n  const qualityInt = getInt(quality)\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (!src) {\n      throw new Error(\n        `Image is missing required \"src\" property. Make sure you pass \"src\" in props to the \\`next/image\\` component. Received: ${JSON.stringify(\n          { width, height, quality }\n        )}`\n      )\n    }\n    if (!VALID_LAYOUT_VALUES.includes(layout)) {\n      throw new Error(\n        `Image with src \"${src}\" has invalid \"layout\" property. Provided \"${layout}\" should be one of ${VALID_LAYOUT_VALUES.map(\n          String\n        ).join(',')}.`\n      )\n    }\n    if (\n      (typeof widthInt !== 'undefined' && isNaN(widthInt)) ||\n      (typeof heightInt !== 'undefined' && isNaN(heightInt))\n    ) {\n      throw new Error(\n        `Image with src \"${src}\" has invalid \"width\" or \"height\" property. These should be numeric values.`\n      )\n    }\n    if (!VALID_LOADING_VALUES.includes(loading)) {\n      throw new Error(\n        `Image with src \"${src}\" has invalid \"loading\" property. Provided \"${loading}\" should be one of ${VALID_LOADING_VALUES.map(\n          String\n        ).join(',')}.`\n      )\n    }\n    if (priority && loading === 'lazy') {\n      throw new Error(\n        `Image with src \"${src}\" has both \"priority\" and \"loading='lazy'\" properties. Only one should be used.`\n      )\n    }\n    if (placeholder === 'blur') {\n      if (layout !== 'fill' && (widthInt || 0) * (heightInt || 0) < 1600) {\n        console.warn(\n          `Image with src \"${src}\" is smaller than 40x40. Consider removing the \"placeholder='blur'\" property to improve performance.`\n        )\n      }\n      if (!blurDataURL) {\n        const VALID_BLUR_EXT = ['jpeg', 'png', 'webp'] // should match next-image-loader\n\n        throw new Error(\n          `Image with src \"${src}\" has \"placeholder='blur'\" property but is missing the \"blurDataURL\" property.\n          Possible solutions:\n            - Add a \"blurDataURL\" property, the contents should be a small Data URL to represent the image\n            - Change the \"src\" property to a static import with one of the supported file types: ${VALID_BLUR_EXT.join(\n              ','\n            )}\n            - Remove the \"placeholder\" property, effectively no blur effect\n          Read more: https://nextjs.org/docs/messages/placeholder-blur-data-url`\n        )\n      }\n    }\n  }\n  let isLazy =\n    !priority && (loading === 'lazy' || typeof loading === 'undefined')\n  if (src && src.startsWith('data:')) {\n    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs\n    unoptimized = true\n    isLazy = false\n  }\n\n  const [setRef, isIntersected] = useIntersection<HTMLImageElement>({\n    rootMargin: '200px',\n    disabled: !isLazy,\n  })\n  const isVisible = !isLazy || isIntersected\n\n  let wrapperStyle: JSX.IntrinsicElements['div']['style'] | undefined\n  let sizerStyle: JSX.IntrinsicElements['div']['style'] | undefined\n  let sizerSvg: string | undefined\n  let imgStyle: ImgElementStyle | undefined = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n\n    boxSizing: 'border-box',\n    padding: 0,\n    border: 'none',\n    margin: 'auto',\n\n    display: 'block',\n    width: 0,\n    height: 0,\n    minWidth: '100%',\n    maxWidth: '100%',\n    minHeight: '100%',\n    maxHeight: '100%',\n\n    objectFit,\n    objectPosition,\n\n    ...(placeholder === 'blur'\n      ? {\n          filter: 'blur(20px)',\n          backgroundSize: 'cover',\n          backgroundImage: `url(\"${blurDataURL}\")`,\n        }\n      : undefined),\n  }\n  if (\n    typeof widthInt !== 'undefined' &&\n    typeof heightInt !== 'undefined' &&\n    layout !== 'fill'\n  ) {\n    // <Image src=\"i.png\" width=\"100\" height=\"100\" />\n    const quotient = heightInt / widthInt\n    const paddingTop = isNaN(quotient) ? '100%' : `${quotient * 100}%`\n    if (layout === 'responsive') {\n      // <Image src=\"i.png\" width=\"100\" height=\"100\" layout=\"responsive\" />\n      wrapperStyle = {\n        display: 'block',\n        overflow: 'hidden',\n        position: 'relative',\n\n        boxSizing: 'border-box',\n        margin: 0,\n      }\n      sizerStyle = { display: 'block', boxSizing: 'border-box', paddingTop }\n    } else if (layout === 'intrinsic') {\n      // <Image src=\"i.png\" width=\"100\" height=\"100\" layout=\"intrinsic\" />\n      wrapperStyle = {\n        display: 'inline-block',\n        maxWidth: '100%',\n        overflow: 'hidden',\n        position: 'relative',\n        boxSizing: 'border-box',\n        margin: 0,\n      }\n      sizerStyle = {\n        boxSizing: 'border-box',\n        display: 'block',\n        maxWidth: '100%',\n      }\n      sizerSvg = `<svg width=\"${widthInt}\" height=\"${heightInt}\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"/>`\n    } else if (layout === 'fixed') {\n      // <Image src=\"i.png\" width=\"100\" height=\"100\" layout=\"fixed\" />\n      wrapperStyle = {\n        overflow: 'hidden',\n        boxSizing: 'border-box',\n        display: 'inline-block',\n        position: 'relative',\n        width: widthInt,\n        height: heightInt,\n      }\n    }\n  } else if (\n    typeof widthInt === 'undefined' &&\n    typeof heightInt === 'undefined' &&\n    layout === 'fill'\n  ) {\n    // <Image src=\"i.png\" layout=\"fill\" />\n    wrapperStyle = {\n      display: 'block',\n      overflow: 'hidden',\n\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      bottom: 0,\n      right: 0,\n\n      boxSizing: 'border-box',\n      margin: 0,\n    }\n  } else {\n    // <Image src=\"i.png\" />\n    if (process.env.NODE_ENV !== 'production') {\n      throw new Error(\n        `Image with src \"${src}\" must use \"width\" and \"height\" properties or \"layout='fill'\" property.`\n      )\n    }\n  }\n\n  let imgAttributes: GenImgAttrsResult = {\n    src:\n      'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n    srcSet: undefined,\n    sizes: undefined,\n  }\n\n  if (isVisible) {\n    imgAttributes = generateImgAttrs({\n      src,\n      unoptimized,\n      layout,\n      width: widthInt,\n      quality: qualityInt,\n      sizes,\n      loader,\n    })\n  }\n\n  return (\n    <div style={wrapperStyle}>\n      {sizerStyle ? (\n        <div style={sizerStyle}>\n          {sizerSvg ? (\n            <img\n              style={{\n                maxWidth: '100%',\n                display: 'block',\n                margin: 0,\n                border: 'none',\n                padding: 0,\n              }}\n              alt=\"\"\n              aria-hidden={true}\n              role=\"presentation\"\n              src={`data:image/svg+xml;base64,${toBase64(sizerSvg)}`}\n            />\n          ) : null}\n        </div>\n      ) : null}\n      {!isVisible && (\n        <noscript>\n          <img\n            {...rest}\n            {...generateImgAttrs({\n              src,\n              unoptimized,\n              layout,\n              width: widthInt,\n              quality: qualityInt,\n              sizes,\n              loader,\n            })}\n            decoding=\"async\"\n            style={imgStyle}\n            className={className}\n          />\n        </noscript>\n      )}\n      <img\n        {...rest}\n        {...imgAttributes}\n        decoding=\"async\"\n        className={className}\n        ref={(element) => {\n          setRef(element)\n          removePlaceholder(element, placeholder)\n        }}\n        style={imgStyle}\n      />\n      {priority ? (\n        // Note how we omit the `href` attribute, as it would only be relevant\n        // for browsers that do not support `imagesrcset`, and in those cases\n        // it would likely cause the incorrect image to be preloaded.\n        //\n        // https://html.spec.whatwg.org/multipage/semantics.html#attr-link-imagesrcset\n        <Head>\n          <link\n            key={\n              '__nimg-' +\n              imgAttributes.src +\n              imgAttributes.srcSet +\n              imgAttributes.sizes\n            }\n            rel=\"preload\"\n            as=\"image\"\n            href={imgAttributes.srcSet ? undefined : imgAttributes.src}\n            // @ts-ignore: imagesrcset is not yet in the link element type\n            imagesrcset={imgAttributes.srcSet}\n            // @ts-ignore: imagesizes is not yet in the link element type\n            imagesizes={imgAttributes.sizes}\n          ></link>\n        </Head>\n      ) : null}\n    </div>\n  )\n}\n\n//BUILT IN LOADERS\n\nfunction normalizeSrc(src: string): string {\n  return src[0] === '/' ? src.slice(1) : src\n}\n\nfunction imgixLoader({\n  root,\n  src,\n  width,\n  quality,\n}: DefaultImageLoaderProps): string {\n  // Demo: https://static.imgix.net/daisy.png?format=auto&fit=max&w=300\n  const params = ['auto=format', 'fit=max', 'w=' + width]\n  let paramsString = ''\n  if (quality) {\n    params.push('q=' + quality)\n  }\n\n  if (params.length) {\n    paramsString = '?' + params.join('&')\n  }\n  return `${root}${normalizeSrc(src)}${paramsString}`\n}\n\nfunction akamaiLoader({ root, src, width }: DefaultImageLoaderProps): string {\n  return `${root}${normalizeSrc(src)}?imwidth=${width}`\n}\n\nfunction cloudinaryLoader({\n  root,\n  src,\n  width,\n  quality,\n}: DefaultImageLoaderProps): string {\n  // Demo: https://res.cloudinary.com/demo/image/upload/w_300,c_limit,q_auto/turtles.jpg\n  const params = ['f_auto', 'c_limit', 'w_' + width, 'q_' + (quality || 'auto')]\n  let paramsString = params.join(',') + '/'\n  return `${root}${paramsString}${normalizeSrc(src)}`\n}\n\nfunction defaultLoader({\n  root,\n  src,\n  width,\n  quality,\n}: DefaultImageLoaderProps): string {\n  if (process.env.NODE_ENV !== 'production') {\n    const missingValues = []\n\n    // these should always be provided but make sure they are\n    if (!src) missingValues.push('src')\n    if (!width) missingValues.push('width')\n\n    if (missingValues.length > 0) {\n      throw new Error(\n        `Next Image Optimization requires ${missingValues.join(\n          ', '\n        )} to be provided. Make sure you pass them as props to the \\`next/image\\` component. Received: ${JSON.stringify(\n          { src, width, quality }\n        )}`\n      )\n    }\n\n    if (src.startsWith('//')) {\n      throw new Error(\n        `Failed to parse src \"${src}\" on \\`next/image\\`, protocol-relative URL (//) must be changed to an absolute URL (http:// or https://)`\n      )\n    }\n\n    if (!src.startsWith('/') && configDomains) {\n      let parsedSrc: URL\n      try {\n        parsedSrc = new URL(src)\n      } catch (err) {\n        console.error(err)\n        throw new Error(\n          `Failed to parse src \"${src}\" on \\`next/image\\`, if using relative image it must start with a leading slash \"/\" or be an absolute URL (http:// or https://)`\n        )\n      }\n\n      if (!configDomains.includes(parsedSrc.hostname)) {\n        throw new Error(\n          `Invalid src prop (${src}) on \\`next/image\\`, hostname \"${parsedSrc.hostname}\" is not configured under images in your \\`next.config.js\\`\\n` +\n            `See more info: https://nextjs.org/docs/messages/next-image-unconfigured-host`\n        )\n      }\n    }\n  }\n\n  return `${root}?url=${encodeURIComponent(src)}&w=${width}&q=${quality || 75}`\n}\n"]},"metadata":{},"sourceType":"script"}