{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"D:/Meta Melon Data/Schengen-Expert/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"D:/Meta Melon Data/Schengen-Expert/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"D:/Meta Melon Data/Schengen-Expert/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"D:/Meta Melon Data/Schengen-Expert/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect } from 'react';\nimport { collection, query, where, getDocs } from 'firebase/firestore';\nimport { db } from '../config/firebaseConfig';\nimport { useState } from 'react';\nimport styles from '@/styles/components/common/filterssidebar.module.css';\nimport { Button, Icon, Select } from '@mui/material';\n\nvar FilterSidebar = function FilterSidebar(_ref) {\n  var getDepartureFilterData = _ref.getDepartureFilterData,\n      getDestinationFilterData = _ref.getDestinationFilterData;\n\n  var _useState = useState([]),\n      destinations = _useState[0],\n      setDestination = _useState[1];\n\n  var _useState2 = useState([]),\n      checkBox = _useState2[0],\n      setCheckBox = _useState2[1];\n\n  var _useState3 = useState(true ? window.innerWidth : 0),\n      width = _useState3[0],\n      setWidth = _useState3[1];\n\n  useEffect(function () {\n    // getDepatureCountries();\n    getDestinationCountries();\n\n    if (false) {\n      return;\n    }\n\n    var handleResize = function handleResize() {\n      return setWidth(window.innerWidth);\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n    return function () {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  var areObjectsEqual = function areObjectsEqual(obj1, obj2) {\n    return obj1.name === obj2.name;\n  }; // const getDepatureCountries = async () => {\n  //   const list = [];\n  //   const q = query(\n  //     collection(db, 'fares'),\n  //     where('deptCountry.code', '!=', ''),\n  //   );\n  //   const querySnapshot = await getDocs(q);\n  //   querySnapshot.forEach((doc) => {\n  //     list.push({ ...doc.data(), _id: doc.id });\n  //   });\n  //   const deptCountry = list.map(val => val.deptCountry);\n  //   const uniqueArray = deptCountry.filter((obj, index, self) =>\n  //     self.findIndex(o => areObjectsEqual(o, obj)) === index\n  //   );\n  //   setDestination([...uniqueArray])\n  // }\n\n\n  var getDestinationCountries = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var list, q, querySnapshot, destCountry, uniqueArray;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              list = [];\n              q = query(collection(db, 'fares'), where('destCountry.code', '!=', '') // where('deptCountry.code', '!=', ''),\n              );\n              _context.next = 4;\n              return getDocs(q);\n\n            case 4:\n              querySnapshot = _context.sent;\n              querySnapshot.forEach(function (doc) {\n                list.push(_objectSpread(_objectSpread({}, doc.data()), {}, {\n                  _id: doc.id\n                }));\n              });\n              destCountry = list.map(function (val) {\n                return val.destCountry;\n              });\n              uniqueArray = destCountry.filter(function (obj, index, self) {\n                return self.findIndex(function (o) {\n                  return areObjectsEqual(o, obj);\n                }) === index;\n              });\n              setDestination(_toConsumableArray(uniqueArray));\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getDestinationCountries() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _useState4 = useState(false),\n      isHide = _useState4[0],\n      setIsHide = _useState4[1];\n\n  var modelClick = function modelClick() {\n    setIsHide(true);\n  };\n\n  var check = function check(code) {\n    var codeArray = _toConsumableArray(checkBox);\n\n    if (codeArray.includes(code)) {\n      var findIndex = codeArray.findIndex(function (val) {\n        return val.code === code;\n      });\n      codeArray.splice(findIndex);\n    } else {\n      codeArray.push(code);\n    }\n\n    setCheckBox(_toConsumableArray(codeArray));\n    getDestinationFilterData(codeArray); // Your checkbox click handler logic goes here\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: width && width < 767 ? /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.mobilefilterbtn,\n        onClick: modelClick,\n        children: \"Select by Filter\"\n      }), isHide && /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.filterssiderbar,\n        children: [/*#__PURE__*/_jsx(\"button\", {\n          className: styles.filterclosebtn,\n          onClick: function onClick() {\n            setIsHide(false);\n          },\n          children: \"\\u2715\"\n        }), /*#__PURE__*/_jsx(\"h2\", {\n          children: \"Filter by Destination\"\n        }), destinations.map(function (val, key) {\n          return /*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              type: \"checkbox\",\n              id: \"Zimbabwe\",\n              onClick: function onClick() {\n                setIsHide(false); // Add this line\n\n                check(val.code);\n              }\n            }), /*#__PURE__*/_jsx(\"label\", {\n              htmlFor: val.name,\n              children: val.name\n            })]\n          }, key);\n        })]\n      })]\n    }) : /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.filterssiderbar,\n        children: [/*#__PURE__*/_jsx(\"h2\", {\n          children: \"Filter by Destination\"\n        }), destinations.map(function (val, key) {\n          return /*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              type: \"checkbox\",\n              id: \"Zimbabwe\",\n              onClick: function onClick() {\n                return check(val.code);\n              }\n            }), /*#__PURE__*/_jsx(\"label\", {\n              htmlFor: val.name,\n              children: val.name\n            })]\n          }, key);\n        })]\n      })\n    })\n  });\n};\n\nexport default FilterSidebar;","map":null,"metadata":{},"sourceType":"module"}