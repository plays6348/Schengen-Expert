{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect } from 'react';\nimport { collection, query, where, getDocs } from 'firebase/firestore';\nimport { db } from '../config/firebaseConfig';\nimport { useState } from 'react';\nimport styles from '@/styles/components/common/filterssidebar.module.css';\nimport { Button, Icon, Select } from '@mui/material';\n\nconst FilterSidebar = ({\n  getDepartureFilterData,\n  getDestinationFilterData\n}) => {\n  const {\n    0: destinations,\n    1: setDestination\n  } = useState([]);\n  const {\n    0: checkBox,\n    1: setCheckBox\n  } = useState([]);\n  const {\n    0: width,\n    1: setWidth\n  } = useState(false ? window.innerWidth : 0);\n  useEffect(() => {\n    // getDepatureCountries();\n    getDestinationCountries();\n\n    if (true) {\n      return;\n    }\n\n    const handleResize = () => setWidth(window.innerWidth);\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  const areObjectsEqual = (obj1, obj2) => {\n    return obj1.name === obj2.name;\n  }; // const getDepatureCountries = async () => {\n  //   const list = [];\n  //   const q = query(\n  //     collection(db, 'fares'),\n  //     where('deptCountry.code', '!=', ''),\n  //   );\n  //   const querySnapshot = await getDocs(q);\n  //   querySnapshot.forEach((doc) => {\n  //     list.push({ ...doc.data(), _id: doc.id });\n  //   });\n  //   const deptCountry = list.map(val => val.deptCountry);\n  //   const uniqueArray = deptCountry.filter((obj, index, self) =>\n  //     self.findIndex(o => areObjectsEqual(o, obj)) === index\n  //   );\n  //   setDestination([...uniqueArray])\n  // }\n\n\n  const getDestinationCountries = async () => {\n    const list = [];\n    const q = query(collection(db, 'fares'), where('destCountry.code', '!=', '') // where('deptCountry.code', '!=', ''),\n    );\n    const querySnapshot = await getDocs(q);\n    querySnapshot.forEach(doc => {\n      list.push(_objectSpread(_objectSpread({}, doc.data()), {}, {\n        _id: doc.id\n      }));\n    });\n    const destCountry = list.map(val => val.destCountry);\n    const uniqueArray = destCountry.filter((obj, index, self) => self.findIndex(o => areObjectsEqual(o, obj)) === index);\n    setDestination([...uniqueArray]);\n  };\n\n  const {\n    0: isHide,\n    1: setIsHide\n  } = useState(false);\n\n  const modelClick = () => {\n    setIsHide(true);\n  };\n\n  const check = code => {\n    let codeArray = [...checkBox];\n\n    if (codeArray.includes(code)) {\n      const findIndex = codeArray.findIndex(val => val.code === code);\n      codeArray.splice(findIndex);\n    } else {\n      codeArray.push(code);\n    }\n\n    setCheckBox([...codeArray]);\n    getDestinationFilterData(codeArray); // Your checkbox click handler logic goes here\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: width && width < 767 ? /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.mobilefilterbtn,\n        onClick: modelClick,\n        children: \"Select by Filter\"\n      }), isHide && /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.filterssiderbar,\n        children: [/*#__PURE__*/_jsx(\"button\", {\n          className: styles.filterclosebtn,\n          onClick: () => {\n            setIsHide(false);\n          },\n          children: \"\\u2715\"\n        }), /*#__PURE__*/_jsx(\"h2\", {\n          children: \"Filter by Destination\"\n        }), destinations.map((val, key) => {\n          return /*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              type: \"checkbox\",\n              id: \"Zimbabwe\",\n              onClick: () => {\n                setIsHide(false); // Add this line\n\n                check(val.code);\n              }\n            }), /*#__PURE__*/_jsx(\"label\", {\n              htmlFor: val.name,\n              children: val.name\n            })]\n          }, key);\n        })]\n      })]\n    }) : /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.filterssiderbar,\n        children: [/*#__PURE__*/_jsx(\"h2\", {\n          children: \"Filter by Destination\"\n        }), destinations.map((val, key) => {\n          return /*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              type: \"checkbox\",\n              id: \"Zimbabwe\",\n              onClick: () => check(val.code)\n            }), /*#__PURE__*/_jsx(\"label\", {\n              htmlFor: val.name,\n              children: val.name\n            })]\n          }, key);\n        })]\n      })\n    })\n  });\n};\n\nexport default FilterSidebar;","map":null,"metadata":{},"sourceType":"module"}